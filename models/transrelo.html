

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transition and Relocation Models &mdash; developer 0.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="developer 0.3.0 documentation" href="../index.html"/>
        <link rel="up" title="Core Models" href="index.html"/>
        <link rel="next" title="Model Related Utilities" href="util.html"/>
        <link rel="prev" title="Supply and Demand Accounting" href="supplydemand.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> developer
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="statistical.html">Statistical Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="supplydemand.html">Supply and Demand Accounting</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Transition and Relocation Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control-table-formatting">Control Table Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transition-model-notes">Transition Model Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="util.html">Model Related Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="urbanchoice.html">Location Choice Utilities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Real Estate Development Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">UrbanSim Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maps/index.html">DataFrame Explorer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">developer</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Core Models</a> &raquo;</li>
        
      <li>Transition and Relocation Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/models/transrelo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transition-and-relocation-models">
<span id="transition-relocation"></span><h1>Transition and Relocation Models<a class="headerlink" href="#transition-and-relocation-models" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Transition models are used to add (via copying) or remove rows from a table
based on prescribed rates or totals.
Relocation models are used to select movers from a table, also based on
prescribed rates.</p>
</div>
<div class="section" id="control-table-formatting">
<h2>Control Table Formatting<a class="headerlink" href="#control-table-formatting" title="Permalink to this headline">¶</a></h2>
<p>The tables of rates and totals used in transition and relocation models have
a particular format that allows them to specify different values for
different segments of the table. Below is an example table:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">num_cars</span> <span class="n">num_children_min</span> <span class="n">num_children_max</span> <span class="n">relocation_rate</span>
       <span class="mi">0</span>              <span class="n">nan</span>                <span class="mi">2</span>            <span class="mf">0.08</span>
       <span class="mi">0</span>                <span class="mi">2</span>                <span class="mi">4</span>            <span class="mf">0.05</span>
       <span class="mi">0</span>                <span class="mi">4</span>              <span class="n">nan</span>            <span class="mf">0.03</span>
       <span class="mi">1</span>              <span class="n">nan</span>                <span class="mi">2</span>            <span class="mf">0.09</span>
       <span class="mi">1</span>                <span class="mi">2</span>                <span class="mi">4</span>            <span class="mf">0.04</span>
       <span class="mi">1</span>                <span class="mi">4</span>              <span class="n">nan</span>            <span class="mf">0.05</span>
</pre></div>
</div>
<p>Each column except the <code class="docutils literal"><span class="pre">relocation_rate</span></code> column describes a filter
on the table to which the rates will be applied. The column names are
inspected to determine the type of the filter and the table column
to which the filter applies.</p>
<p>Column names that end with <code class="docutils literal"><span class="pre">_min</span></code> indicate a &#8220;greater than or equal to&#8221;
filter. For example, the second row of the above table will have a filter
like <code class="docutils literal"><span class="pre">num_children</span> <span class="pre">&gt;=</span> <span class="pre">2</span></code>.</p>
<p>Column names that end with <code class="docutils literal"><span class="pre">_max</span></code> indicate a &#8220;less than&#8221; filter.
For example, the second row of the above table will have a filter like
<code class="docutils literal"><span class="pre">num_children</span> <span class="pre">&lt;</span> <span class="pre">4</span></code>. Notice that the maximum is not inclusive.</p>
<p>Column names that do not end in <code class="docutils literal"><span class="pre">_min</span></code> or <code class="docutils literal"><span class="pre">_max</span></code> indicate an
&#8220;equal to&#8221; filter. In the above table the first, second, and third rows
will have a filter like <code class="docutils literal"><span class="pre">num_cars</span> <span class="pre">==</span> <span class="pre">0</span></code>.</p>
<p><code class="docutils literal"><span class="pre">nan</span></code> values indicate filters that do not apply in a given row.</p>
</div>
<div class="section" id="transition-model-notes">
<h2>Transition Model Notes<a class="headerlink" href="#transition-model-notes" title="Permalink to this headline">¶</a></h2>
<p>Transition models have two components. The main interface is the
<a class="reference internal" href="#urbansim.models.transition.TransitionModel" title="urbansim.models.transition.TransitionModel"><code class="xref py py-class docutils literal"><span class="pre">TransitionModel</span></code></a>, but it
is configured by providing a &#8220;transitioner&#8221;.
Transitioners can make transitions based on different inputs like
growth rates and control totals. Available transitioners are:</p>
<ul class="simple">
<li><a class="reference internal" href="#urbansim.models.transition.GrowthRateTransition" title="urbansim.models.transition.GrowthRateTransition"><code class="xref py py-class docutils literal"><span class="pre">GrowthRateTransition</span></code></a></li>
<li><a class="reference internal" href="#urbansim.models.transition.TabularGrowthRateTransition" title="urbansim.models.transition.TabularGrowthRateTransition"><code class="xref py py-class docutils literal"><span class="pre">TabularGrowthRateTransition</span></code></a></li>
<li><a class="reference internal" href="#urbansim.models.transition.TabularTotalsTransition" title="urbansim.models.transition.TabularTotalsTransition"><code class="xref py py-class docutils literal"><span class="pre">TabularTotalsTransition</span></code></a></li>
</ul>
<p>Or you could write and provide your own transitioner.
Transitioners are expected to be callable and take arguments of a
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe">DataFrame</a> with the data to transition and a year number.
They should return a new data table, the indexes of rows added,
the indexes of rows copied, and the indexes of rows removed.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="transition-api">
<h3>Transition API<a class="headerlink" href="#transition-api" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim.models.transition.GrowthRateTransition" title="urbansim.models.transition.GrowthRateTransition"><code class="xref py py-obj docutils literal"><span class="pre">GrowthRateTransition</span></code></a>(growth_rate[,&nbsp;...])</td>
<td>Transition given tables using a simple growth rate.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim.models.transition.TabularGrowthRateTransition" title="urbansim.models.transition.TabularGrowthRateTransition"><code class="xref py py-obj docutils literal"><span class="pre">TabularGrowthRateTransition</span></code></a>(growth_rates,&nbsp;...)</td>
<td>Growth rate based transitions where the rates are stored in a table indexed by year with optional segmentation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim.models.transition.TabularTotalsTransition" title="urbansim.models.transition.TabularTotalsTransition"><code class="xref py py-obj docutils literal"><span class="pre">TabularTotalsTransition</span></code></a>(targets,&nbsp;totals_column)</td>
<td>Transition data via control totals in pandas DataFrame with optional segmentation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim.models.transition.TransitionModel" title="urbansim.models.transition.TransitionModel"><code class="xref py py-obj docutils literal"><span class="pre">TransitionModel</span></code></a>(transitioner)</td>
<td>Models things moving into or out of a region.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="relocation-api">
<h3>Relocation API<a class="headerlink" href="#relocation-api" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim.models.relocation.RelocationModel" title="urbansim.models.relocation.RelocationModel"><code class="xref py py-obj docutils literal"><span class="pre">RelocationModel</span></code></a>(rates[,&nbsp;rate_column])</td>
<td>Find movers within a population according to a table of relocation rates.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-urbansim.models.transition">
<span id="transition-api-docs"></span><h3>Transition API Docs<a class="headerlink" href="#module-urbansim.models.transition" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">TransitionModel</span></code> class with the different transitioners to
add or remove agents based on growth rates or target totals.</p>
<dl class="class">
<dt id="urbansim.models.transition.GrowthRateTransition">
<em class="property">class </em><code class="descclassname">urbansim.models.transition.</code><code class="descname">GrowthRateTransition</code><span class="sig-paren">(</span><em>growth_rate</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#GrowthRateTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.GrowthRateTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Transition given tables using a simple growth rate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>growth_rate</strong> : float</p>
<p><strong>accounting_column: string, optional</strong></p>
<blockquote class="last">
<div><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.models.transition.GrowthRateTransition.transition">
<code class="descname">transition</code><span class="sig-paren">(</span><em>data</em>, <em>year</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#GrowthRateTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.GrowthRateTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
growth rate for this model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Rows will be removed from or added to this table.</p>
</div></blockquote>
<p><strong>year</strong> : None, optional</p>
<blockquote>
<div><p>Here for compatibility with other transition models,
but ignored.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with rows removed or added.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Index</p>
<blockquote>
<div><p>New indexes of the rows that were added.</p>
</div></blockquote>
<p><strong>copied</strong> : pandas.Index</p>
<blockquote>
<div><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</div></blockquote>
<p><strong>removed</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Index of rows that were removed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urbansim.models.transition.TabularGrowthRateTransition">
<em class="property">class </em><code class="descclassname">urbansim.models.transition.</code><code class="descname">TabularGrowthRateTransition</code><span class="sig-paren">(</span><em>growth_rates</em>, <em>rates_column</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularGrowthRateTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularGrowthRateTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Growth rate based transitions where the rates are stored in
a table indexed by year with optional segmentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>growth_rates</strong> : pandas.DataFrame</p>
<p><strong>rates_column</strong> : str</p>
<blockquote>
<div><p>Name of the column in <cite>growth_rates</cite> that contains the rates.</p>
</div></blockquote>
<p><strong>accounting_column: string, optional</strong></p>
<blockquote class="last">
<div><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.models.transition.TabularGrowthRateTransition.transition">
<code class="descname">transition</code><span class="sig-paren">(</span><em>data</em>, <em>year</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularGrowthRateTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularGrowthRateTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
growth rate for this model and year.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Rows will be removed from or added to this table.</p>
</div></blockquote>
<p><strong>year</strong> : None, optional</p>
<blockquote>
<div><p>Here for compatibility with other transition models,
but ignored.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with rows removed or added.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Index</p>
<blockquote>
<div><p>New indexes of the rows that were added.</p>
</div></blockquote>
<p><strong>copied</strong> : pandas.Index</p>
<blockquote>
<div><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</div></blockquote>
<p><strong>removed</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Index of rows that were removed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urbansim.models.transition.TabularTotalsTransition">
<em class="property">class </em><code class="descclassname">urbansim.models.transition.</code><code class="descname">TabularTotalsTransition</code><span class="sig-paren">(</span><em>targets</em>, <em>totals_column</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularTotalsTransition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularTotalsTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>Transition data via control totals in pandas DataFrame with
optional segmentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>targets</strong> : pandas.DataFrame</p>
<p><strong>totals_column</strong> : str</p>
<blockquote>
<div><p>Name of the column in <cite>targets</cite> that contains the control totals.</p>
</div></blockquote>
<p><strong>accounting_column: string, optional</strong></p>
<blockquote class="last">
<div><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.models.transition.TabularTotalsTransition.transition">
<code class="descname">transition</code><span class="sig-paren">(</span><em>data</em>, <em>year</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TabularTotalsTransition.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TabularTotalsTransition.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table according to the prescribed
totals for this model and year.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Rows will be removed from or added to this table.</p>
</div></blockquote>
<p><strong>year</strong> : None, optional</p>
<blockquote>
<div><p>Here for compatibility with other transition models,
but ignored.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with rows removed or added.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Index</p>
<blockquote>
<div><p>New indexes of the rows that were added.</p>
</div></blockquote>
<p><strong>copied</strong> : pandas.Index</p>
<blockquote>
<div><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</div></blockquote>
<p><strong>removed</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Index of rows that were removed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urbansim.models.transition.TransitionModel">
<em class="property">class </em><code class="descclassname">urbansim.models.transition.</code><code class="descname">TransitionModel</code><span class="sig-paren">(</span><em>transitioner</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TransitionModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TransitionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Models things moving into or out of a region.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>transitioner</strong> : callable</p>
<blockquote class="last">
<div><p>A callable that takes a data table and a year number and returns
and new data table, the indexes of rows added, the indexes
of rows copied, and the indexes of rows removed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.models.transition.TransitionModel.transition">
<code class="descname">transition</code><span class="sig-paren">(</span><em>data</em>, <em>year</em>, <em>linked_tables=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#TransitionModel.transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.TransitionModel.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows from a table based on population targets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Rows will be removed from or added to this table.</p>
</div></blockquote>
<p><strong>year</strong> : int</p>
<blockquote>
<div><p>Year number that will be passed to <cite>transitioner</cite>.</p>
</div></blockquote>
<p><strong>linked_tables</strong> : dict of tuple, optional</p>
<blockquote>
<div><p>Dictionary of (table, &#8216;column name&#8217;) pairs. The column name
should match the index of <cite>data</cite>. Indexes in <cite>data</cite> that
are copied or removed will also be copied and removed in
linked tables. They dictionary keys are used in the
returned <cite>updated_links</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with rows removed or added.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Series</p>
<blockquote>
<div><p>Indexes of new rows in <cite>updated</cite>.</p>
</div></blockquote>
<p class="last"><strong>updated_links</strong> : dict of pandas.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urbansim.models.transition.add_or_remove_rows">
<code class="descclassname">urbansim.models.transition.</code><code class="descname">add_or_remove_rows</code><span class="sig-paren">(</span><em>data</em>, <em>nrows</em>, <em>starting_index=None</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#add_or_remove_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.add_or_remove_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or remove rows to/from a table. Rows are added
for positive <cite>nrows</cite> and removed for negative <cite>nrows</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : DataFrame</p>
<p><strong>nrows</strong> : float</p>
<blockquote>
<div><p>Number of rows to add or remove.</p>
</div></blockquote>
<p><strong>starting_index</strong> : int, optional</p>
<blockquote>
<div><p>The starting index from which to calculate indexes for new rows.
If not given the max + 1 of the index of <cite>data</cite> will be used.
(Not applicable if rows are being removed.)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with random rows removed.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Index</p>
<blockquote>
<div><p>New indexes of the rows that were added.</p>
</div></blockquote>
<p><strong>copied</strong> : pandas.Index</p>
<blockquote>
<div><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</div></blockquote>
<p><strong>removed</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Index of rows that were removed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urbansim.models.transition.add_rows">
<code class="descclassname">urbansim.models.transition.</code><code class="descname">add_rows</code><span class="sig-paren">(</span><em>data</em>, <em>nrows</em>, <em>starting_index=None</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#add_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.add_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Add rows to data table according to a given nrows.
New rows will have their IDs set to NaN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : pandas.DataFrame</p>
<p><strong>nrows</strong> : int</p>
<blockquote>
<div><p>Number of rows to add.</p>
</div></blockquote>
<p><strong>starting_index</strong> : int, optional</p>
<blockquote>
<div><p>The starting index from which to calculate indexes for the new
rows. If not given the max + 1 of the index of <cite>data</cite> will be used.</p>
</div></blockquote>
<p><strong>accounting_column: string, optional</strong></p>
<blockquote>
<div><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with rows added. New rows will have their index values
set to NaN.</p>
</div></blockquote>
<p><strong>added</strong> : pandas.Index</p>
<blockquote>
<div><p>New indexes of the rows that were added.</p>
</div></blockquote>
<p><strong>copied</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Indexes of rows that were copied. A row copied multiple times
will have multiple entries.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urbansim.models.transition.remove_rows">
<code class="descclassname">urbansim.models.transition.</code><code class="descname">remove_rows</code><span class="sig-paren">(</span><em>data</em>, <em>nrows</em>, <em>accounting_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/transition.html#remove_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.transition.remove_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a random <cite>nrows</cite> number of rows from a table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : DataFrame</p>
<p><strong>nrows</strong> : float</p>
<blockquote>
<div><p>Number of rows to remove.</p>
</div></blockquote>
<p><strong>accounting_column: string, optional</strong></p>
<blockquote>
<div><p>Name of column with accounting totals/quanties to apply towards the control. If not provided
then row counts will be used for accounting.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>updated</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table with random rows removed.</p>
</div></blockquote>
<p><strong>removed</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Indexes of the rows removed from the table.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-urbansim.models.relocation">
<span id="relocation-api-docs"></span><h3>Relocation API Docs<a class="headerlink" href="#module-urbansim.models.relocation" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">RelocationModel</span></code> class to choose movers based on
relocation rates.</p>
<dl class="class">
<dt id="urbansim.models.relocation.RelocationModel">
<em class="property">class </em><code class="descclassname">urbansim.models.relocation.</code><code class="descname">RelocationModel</code><span class="sig-paren">(</span><em>rates</em>, <em>rate_column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#RelocationModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.RelocationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Find movers within a population according to a table of
relocation rates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rates</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table of relocation rates. Index is unused.</p>
<p>Other columns describe filters on the <cite>choosers</cite>
table so that different segments can have different relocation
rates. Columns that ends with &#8216;_max&#8217; will be used to create
a &#8220;less than&#8221; filters, columns that end with &#8216;_min&#8217; will be
used to create &#8220;greater than or equal to&#8221; filters.
A column with no suffix will be used to make an &#8216;equal to&#8217; filter.</p>
<p>An example <cite>rates</cite> structure:</p>
<dl class="docutils">
<dt>age_of_head_max  age_of_head_min</dt>
<dd><dl class="first last docutils">
<dt>nan               65</dt>
<dd><p class="first last">65               40</p>
</dd>
</dl>
</dd>
</dl>
<p>In this example the <cite>choosers</cite> table would need to have an
&#8216;age_of_head&#8217; column on which to filter.</p>
<p>nan should be used to flag filters that do not apply
in a given row.</p>
</div></blockquote>
<p><strong>rate_column</strong> : object, optional</p>
<blockquote class="last">
<div><p>Name of column in <cite>rates</cite> table that contains relocation rates.
If not given &#8216;probability_of_relocating&#8217; is used.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim.models.relocation.RelocationModel.find_movers">
<code class="descname">find_movers</code><span class="sig-paren">(</span><em>choosers</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#RelocationModel.find_movers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.RelocationModel.find_movers" title="Permalink to this definition">¶</a></dt>
<dd><p>Select movers from among a table of <cite>choosers</cite> according to the
stored relocation rates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>choosers</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table of agents from which to find movers.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>movers</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Suitable for indexing <cite>choosers</cite> by index.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urbansim.models.relocation.find_movers">
<code class="descclassname">urbansim.models.relocation.</code><code class="descname">find_movers</code><span class="sig-paren">(</span><em>choosers</em>, <em>rates</em>, <em>rate_column</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/urbansim/models/relocation.html#find_movers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim.models.relocation.find_movers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of the indexes of the <cite>choosers</cite> that are slated
to move.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>choosers</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table of agents from which to find movers.</p>
</div></blockquote>
<p><strong>rates</strong> : pandas.DataFrame</p>
<blockquote>
<div><p>Table of relocation rates. Index is unused.</p>
<p>Other columns describe filters on the <cite>choosers</cite>
table so that different segments can have different relocation
rates. Columns that ends with &#8216;_max&#8217; will be used to create
a &#8220;less than&#8221; filters, columns that end with &#8216;_min&#8217; will be
used to create &#8220;greater than or equal to&#8221; filters.
A column with no suffix will be used to make an &#8216;equal to&#8217; filter.</p>
<p>An example <cite>rates</cite> structure:</p>
<dl class="docutils">
<dt>age_of_head_max  age_of_head_min</dt>
<dd><dl class="first last docutils">
<dt>nan               65</dt>
<dd><p class="first last">65               40</p>
</dd>
</dl>
</dd>
</dl>
<p>In this example the <cite>choosers</cite> table would need to have an
&#8216;age_of_head&#8217; column on which to filter.</p>
<p>nan should be used to flag filters that do not apply
in a given row.</p>
</div></blockquote>
<p><strong>rate_column</strong> : object</p>
<blockquote>
<div><p>Name of column in <cite>rates</cite> table that has relocation rates.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>movers</strong> : pandas.Index</p>
<blockquote class="last">
<div><p>Suitable for indexing <cite>choosers</cite> by index.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="util.html" class="btn btn-neutral float-right" title="Model Related Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="supplydemand.html" class="btn btn-neutral" title="Supply and Demand Accounting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, UrbanSim Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>